# PlainHub 開発チケット管理

## チケット一覧

### PH-001: 本番環境の分離と公開戦略 [新規] [優先度: 高]
**ステータス**: 未着手
**詳細要件**:
- 現在の開発環境（katsupin.github.io）から本番環境を分離
- ricrio会社アカウントでの新規GitHubアカウント作成を検討
- または公開用リポジトリを別途作成
- 開発用リポジトリは非公開化
- 公開リポジトリ名は「PlainHub」ベースで検討
**実装メモ**:
- GitHub Actionsでの自動デプロイ設定も検討
- 開発→本番の反映フローを確立

---

### PH-002: ブラウザタブにファイル名表示 [新規] [優先度: 高]
**ステータス**: 完了
**詳細要件**:
- document.titleを「ファイル名 - PlainHub」形式で更新
- ファイル名が長い場合は先頭文字を優先表示（例: "memo... - PlainHub"）
- ファイル未選択時は「PlainHub」
**実装メモ**:
- loadFile時にdocument.title更新
- ファイル名の省略ロジック実装（20文字程度で切る？）

---

### PH-003: モバイル版ログインアイコン統一 [改修] [優先度: 中]
**ステータス**: 完了
**詳細要件**:
- モバイル版の歯車アイコンを鍵アイコン（🔐）に変更
- PC版と統一
**実装メモ**:
- mobileAuthToggleボタンのアイコン変更

---

### PH-004: Undo/Redo機能実装 [新規] [優先度: 高]
**ステータス**: 完了
**詳細要件**:
- Undo/Redoボタンをツールバーに追加
- Ctrl+Z（Cmd+Z）でUndo
- Ctrl+Y（Cmd+Shift+Z）でRedo
- 履歴スタックは50操作程度保持
**実装メモ**:
- カスタム履歴管理またはtextareaのネイティブ機能活用を検討
- 保存前の変更履歴のみ対象

---

### PH-005: Git履歴表示機能 [新規] [優先度: 高]
**ステータス**: 完了
**詳細要件**:
- ファイルのコミット履歴を表示（最新10件から開始）
- 表示形式: 日時 + ファイルハッシュ（コミットメッセージはauto-saveなので省略可）
- 特定の履歴時点のファイル内容を表示・復元
- UI案1: エディタ右側に履歴パネル
- UI案2: 専用の履歴ページ（差分表示付き）
**実装メモ**:
- GitHub API: GET /repos/{owner}/{repo}/commits?path={file_path}
- 差分表示ライブラリの検討

---

### PH-006: 検索結果の行単位クリック対応 [改修] [優先度: 高]
**ステータス**: 完了
**詳細要件**:
- 内容検索結果の各行を個別にクリック可能に
- クリックした行にエディタがジャンプ
- 該当行をハイライト表示
**実装メモ**:
- 各検索結果行にdata-line-number属性付与
- エディタのスクロール位置計算ロジック実装

---

### PH-007: 矩形選択機能 [新規] [優先度: 中]
**ステータス**: 未着手
**詳細要件**:
- Alt+ドラッグで矩形選択
- Shift+Alt+矢印キーで矩形選択範囲拡張
- 複数カーソル表示（VS Code風）
- 矩形範囲のコピー/ペースト対応
**実装メモ**:
- textareaでは実装困難、CodeMirrorやMonaco Editor導入を検討
- または独自実装（オーバーレイ使用）

---

### PH-008: 検索ハイライトのパディング対応 [改修] [優先度: 中]
**ステータス**: 完了
**詳細要件**:
- 検索オーバーレイにエディタと同じ下部パディング適用
- スクロール時のずれを解消
**実装メモ**:
- .search-overlayにpadding-bottom: calc(100vh - 250px)追加

---

### PH-009: リアルタイム同期と競合防止 [改修] [優先度: 高]
**ステータス**: 完了（簡易版）
**詳細要件**:
- 外部更新検知時のデータロスト防止
- 編集中の内容を保護
- 差分マージまたは選択的更新
**実装メモ**:
- 難易度: 高（完全なリアルタイム共同編集は非常に複雑）
- 段階的実装案:
  1. 編集中フラグで外部更新を一時ブロック
  2. 差分表示して手動マージ
  3. 将来的にOT（Operational Transformation）検討
- 現在の同期チェック間隔（10秒）の調整も検討

---

### PH-010: 内容検索の初回失敗バグ [バグ] [優先度: 低]
**ステータス**: 完了
**詳細要件**:
- 内容検索で初回検索が失敗する問題の調査
- キャッシュタイミングの問題か？
**実装メモ**:
- contentSearchCacheの初期化タイミング確認
- API呼び出しのタイミング問題調査

---

### PH-011: モバイル版不可視文字ずれ [バグ] [優先度: 低]
**ステータス**: 完了
**詳細要件**:
- モバイル版で不可視文字表示がずれる問題
**実装メモ**:
- モバイル用CSSの確認
- フォントサイズやline-heightの調整

---

### PH-012: モバイル版下部パディング未反映 [バグ] [優先度: 低]
**ステータス**: 完了
**詳細要件**:
- モバイル版でエディタ下部パディングが効かない
**実装メモ**:
- モバイル用CSSでpadding-bottomが上書きされていないか確認

---

## 実装優先順位

1. **高優先度（新規機能）**
   - PH-001: 本番環境の分離
   - PH-002: タブ表示
   - PH-004: Undo/Redo
   - PH-005: Git履歴
   - PH-006: 検索結果クリック
   - PH-009: 同期競合防止

2. **中優先度（改修）**
   - PH-003: モバイルアイコン
   - PH-007: 矩形選択
   - PH-008: 検索パディング

3. **低優先度（バグ）**
   - PH-010: 検索初回失敗
   - PH-011: モバイル不可視文字
   - PH-012: モバイルパディング

## 実装メモ

### PH-009（同期競合防止）の難易度について
- **現在の実装**: 10秒ごとにファイルのSHA比較で更新検知
- **問題点**: 編集中に外部更新があると内容が上書きされる可能性
- **段階的実装提案**:
  1. **簡易版（1週間）**: 編集中は外部更新を保留、保存後に差分表示
  2. **中級版（2-3週間）**: 3-way mergeで自動マージ可能な部分は統合
  3. **完全版（1-2ヶ月）**: OTアルゴリズムでリアルタイム共同編集

推奨: まず簡易版で実装し、必要に応じて段階的に拡張